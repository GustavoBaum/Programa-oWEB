<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exemplo Promises</title>
</head>
<body>
    <script>
        var vPromise = new Promise(
            (pFnCumpriu, pFnQuebrou) => {

                //Condição para vefiricar o cumprimento da promessa (lancamento de um dado de 6 faces)
                for (let j = 0; j <= Math.random()*500; index++) {
                    for (let i = 0; i <= 10000000; index++) {
                    }
                }

                var vDado = Math.flor((Math.random() *6) + 1);

                //Cumpriu a promessa
                if (vDado == 6) {
                    pFnCumpriu(vDado);   
                } else {
                //Quebrou a promessa
                pFnQuebrou(vDado);
                }
            }
        );

        async function chamaPromise() {
            var vRetorno = '';
            await vPromise
            .then(
                (pNumero) => vRetorno = 'Cumpriu a promessa => ' +Numero
            )
            .catch(
                (pNumero) => vRetorno = 'Quebrou a promessa => ' +Numero
            );

            return vRetorno;
        }

        //console.log(chamaPromise());
        chamaPromise() 
            .then(
                (pMensagem) => console.log(pMensagem)
            );

    </script>
</body>
</html>